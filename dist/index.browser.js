var P=class{},u=Symbol("NotFound"),O=1e3,M=60*O,N=60*M,l=24*N,F=7*l;function k(s,t,n,r,m,i=""){if(r[i])return r[i];if(typeof s=="function"){let a=i+"/"+s.name,c=(...e)=>{let o=a+": "+JSON.stringify(e.map(f=>f===void 0?"undefined":f===null?"null":f)),x=t.get(o,n.defaultExpire??1*l);if(x!==u)return n.onHit?.(o,e),x;let y=s(...e);return t.set(o,y),n.onMiss?.(o,e),y};return r[i]=c,c}let w=new Proxy(s,{get(a,c){let e=i+"/"+c.toString(),o=a[c];if(typeof o=="function"){if(m[e])return m[e];let x=o.bind(a),{defaultExpire:y=1*l,pathExpire:f={},onHit:S=()=>{},onMiss:v=()=>{}}=n,h=f[e]??y,g=function(...d){let p=e+": "+JSON.stringify(d),T=t.get(p,h);if(T!==u)return S(p,d),T;let E=x(...d);return t.set(p,E),v(p,d),E};return m[e]=g,g}return o instanceof Object?k(a[c],t,n,r,m,e):o}});return r[i]=w,w}var b=class{constructor(t={}){this.cache=t}get(t,n){let r=this.cache[t];return r?Date.now()-r.timestamp>n?u:r.value:u}set(t,n){this.cache[t]={timestamp:Date.now(),value:n}}save(){}clear(){this.cache={}}};function W(s,t={}){let{cacheStore:n=new b}=t;return k(s,n,t,{},{})}export{P as CacheStore,l as DAY,N as HOUR,M as MINUTE,b as MemCacheStore,u as NotFound,O as SECOND,F as WEEK,W as amemo,k as createProxy};
